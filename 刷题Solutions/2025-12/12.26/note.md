# 构造题练习02


重点练习了 **Codeforces** 中的构造题（Constructive Algorithms）与思维题，涵盖了奇偶性分析、几何贡献度以及等差数列边界判定等核心思想。

---

## 1. [1713C - Build Permutation](https://codeforces.com/problemset/problem/1713/C) (逆向递归构造)

* **题目大意**：构造一个 $0 \dots n-1$ 的全排列 $a$，使得每个位置 $i$ 满足 $a_i + i$ 是一个完全平方数。
* **核心逻辑**：**从受限最大的位置（末尾）开始处理**。
    1.  找到大于等于当前最大索引 $k$ 的最小完全平方数 $S$。
    2.  由于 $S \le 2k$，左边界 $x = S - k$ 必然在 $[0, k]$ 范围内。
    3.  将区间 $[x, k]$ 内的数字**对称翻转填充**，此时该区间内所有位置的和均为 $S$。
    4.  剩余部分变为规模更小的子问题 $[0, x-1]$，循环处理直至完成。
* **关键点**：利用平方数分布的稠密性保证了每次翻转必然有解。

---

## 2. [1845A - Forbidden Integer](https://codeforces.com/problemset/problem/1845/A) (奇偶性分类)

* **题目大意**：给定 $n, k, x$，询问能否用 $1 \dots k$ 之间（除了 $x$ 以外）的正整数凑出总和 $n$。
* **核心逻辑**：**基于 1 的特殊性进行分类讨论**。
    * **情况 A ($x \ne 1$)**：最简单，直接全部使用 $1$，共 $n$ 个。
    * **情况 B ($x = 1$)**：只能使用 $2, 3, \dots$。
        * 若 $n$ 为偶数：全部使用 $2$ 即可（前提 $k \ge 2$）。
        * 若 $n$ 为奇数：必须借用一个 $3$ 将余下的和转为偶数，剩余全部使用 $2$（前提 $k \ge 3$ 且 $n \ge 3$）。
* **关键点**：在禁用 $1$ 的情况下，**奇偶性转换**（利用 $3$ 和 $2$ 的组合）是构造的核心。

---

## 3. [1620B - Triangles on a Rectangle](https://codeforces.com/problemset/problem/1620/B) (几何贡献度)

* **题目大意**：在矩形的四条边上给定若干点，从中选 3 个点组成三角形，求最大面积的 2 倍。
* **核心逻辑**：**贪心锁定最大底边与高度**。
    * 三角形面积 $2S = base \times height$。
    * 要使面积最大，必须选择同一条边上跨度最远的两点作为 $base$。
    * **四种情况取最大值**：
        1.  底边在水平边（$y=0$ 或 $y=h$）上，$height = h$。
        2.  底边在垂直边（$x=0$ 或 $x=w$）上，$height = w$。
* **总结**：利用矩形边界的固定高度，将二维搜索简化为一维线段长度的提取。

---

## 4. [1878C - Vasilije in Čačak](https://codeforces.com/problemset/problem/1878/C) (上下界 $O(1)$ 判定)

* **题目大意**：从 $1 \dots n$ 中选 $k$ 个互不相同的数，其总和是否可能等于 $x$。
* **核心逻辑**：**等差数列边界判定**。
    * **最小可能和**：选取前 $k$ 个数，$min\_sum = \frac{k(1 + k)}{2}$。
    * **最大可能和**：选取后 $k$ 个数，$max\_sum = \frac{k(2n - k + 1)}{2}$。
    * **判定条件**：只要 $min\_sum \le x \le max\_sum$，则必然可以通过平滑移动数字构造出解。
* **关键点**：在大规模数据下，必须使用求和公式实现 $O(1)$ 复杂度，并强制使用 `long long` 防止溢出。
