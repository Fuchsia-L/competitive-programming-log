# ACM 练习笔记 (2026-01-02)

## [001] CF 474B - Worms (前缀和 / 二分 / 边界)

* **题目大意**  
  给定每堆虫子的数量，构造前缀和。  
  每次查询第 x 只虫子属于第几堆。

* **核心问题（本题踩的坑）**  
  1. **二分搜索区间包含了不该参与的数据**  
     - 使用了 `lower_bound(a.begin(), a.end(), x)`  
     - 实际只应在 `[1..n]` 的前缀和区间内搜索  
     - 导致“返回下标”和“堆编号语义”不完全一致

  2. **数组多开但未完全初始化，破坏了有序性**  
     - `resize(n+2, 0)`，但只计算到 `a[n]`  
     - `a[n+1] = 0` 残留在末尾  
     - 前缀和数组应单调不减，但尾部 0 使数组不再严格有序  
     - `lower_bound` 在非有序区间上的行为不可靠

  3. **结果“看起来对”但实现不稳**  
     - 输出的是 vector 下标  
     - 但搜索区间与编号语义未严格绑定  
     - 属于依赖实现细节的写法

* **实现层面的结论**  
  - 前缀和数组只开 `n+1`  
  - 二分区间限定为 `[a.begin()+1, a.begin()+n+1)`  
  - 不把未填充、哨兵、默认值混入二分区间
